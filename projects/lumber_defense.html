<!DOCTYPE html>
<html lang=""en>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gameoholic's Portfolio</title>
    <link rel="stylesheet" href="/styles/lumber_defense.css">
    <script src="https://kit.fontawesome.com/793b2a4346.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>

  <body>
      <div class="container">
        <div class="header">
          <h1>Lumber Defense</h1>

          <div class="video-with-text">
            <video controls autoplay muted loop>
              <source src="/videos/lumber_defense.mp4" type="video/mp4">
            Your browser does not support the video tag.
            </video>
            <p>The video has sound!</p>
          </div>
        </div>

        <div class="github-info">
          <p><i class="fa-brands fa-github" id="github-info-icon"></i><i>This project is open source! View its repository at the bottom of this page.</i></p>
        </div>

        <div class="explanation">
          <p>Lumber Defense is a PVE Minigame plugin.<br>Your objective is to survive attacks from mobs, and to defend your tree.<br>Some mobs (marked with a sapling in their name) only target the tree, and should be dealt with quickly.<br>Other mobs will attack you and try to slow you down.<br>You can watch the full playthrough video <a href="https://www.youtube.com/watch?v=JHmi_LbGW9w" rel="noopener noreferrer" target="_blank">here</a>.<br><br>
          The tree starts with 20 health, and can be healed using bone meal for 10% of its max health. Bone meal is obtained as a rare drop from mobs.<br>The tree's max health can be upgraded by placing down a bone block. Bone blocks are obtained from boss waves (every 5 waves).</p>

          <div class="video-with-text">
            <video controls autoplay muted loop>
              <source src="/videos/lumber_defense_tree_upgrade.mp4" type="video/mp4" alt="Gun showcase in Grass Conflicts">
            Your browser does not support the video tag.
            </video>
            <p>Healing and upgrading the tree</p>
          </div>

          <p>Adding a strategic layer to the game, players can intentionally chop down the tree and decrease its health to acquire Lumber - a crucial currency allowing the purchase of powerful items and upgrades. This introduces a dilemma where lowering the tree's health becomes a calculated decision that is both risky and rewarding.</p>

          <div class="video-with-text">
            <video controls autoplay muted loop>
              <source src="/videos/lumber_defense_sacrifice_health.mp4" type="video/mp4" alt="Gun showcase in Grass Conflicts">
            Your browser does not support the video tag.
            </video>
            <p>Chopping down the tree for Lumber</p>
          </div>

          <p>Speaking of powerful items, the shop is where you spend your resources. You can buy items, or perks.</p>
          
          <div class="video-with-text">
            <video controls autoplay muted loop>
              <source src="/videos/lumber_defense_shop.mp4" type="video/mp4" alt="Gun showcase in Grass Conflicts">
            Your browser does not support the video tag.
            </video>
            <p></p>
          </div>

          <p><b><br>This project is still under development, with tons of more features to come.</b></p>


          <div class="code">
            <h2>From a Technical Viewpoint</h2>

            <h3>Mobs</h3>
            <p>The mobs are split into 2 types: Those that attack players ("hostile mobs"), and those that attack the tree ("tree mobs").<br>I had to make sure that hostile mobs would spawn and target the player, regardless of the distane between them and line of sight. For this I had to modify the mobs' target and attack goals with NMS.<br>As for tree mobs, I used NMS to create custom navigation for them, so that they pathfind to the tree, and attack it when close. Further custom goals had to be written for creepers, skeletons and custom mobs like the Ranged Bomber, that chucks TNT at players.<br>As for balancing, each mob has a Challenge Rating (abbreviated CR). Their stats scale along with the mob's Challenge Rating.</p>

            <div class="image-with-text">
              <img class="expandable-image" src="/images/portfolio_images/lumber_defense/mobs.png">
              <p>Full config file available <a href="https://github.com/Gameoholic/LumberGame/blob/main/src/main/resources/hostile_mob_types.yml" rel="noopener noreferrer" target="_blank">here</a></p>
            </div>
            
            <h3>Waves</h3>
            <p>Every wave has a Challenge Rating, mob types that can spawn during it, and other settings.<br>The Challenge Rating will be spent on spawning mobs. For example, a wave with a CR of 30, with mobs that spawn between CR 5-7, will on average have 5 mobs with a Challenge Rating of 6.</p>

            <div class="image-with-text">
              <img class="expandable-image" src="/images/portfolio_images/lumber_defense/waves.png">
              <p>Full config file available <a href="https://github.com/Gameoholic/LumberGame/blob/main/src/main/resources/waves.yml" rel="noopener noreferrer" target="_blank">here</a></p>
            </div>

            <h3>Menus & Perks</h3>
            <p>I created a system for menus and perks, so it's really easy to create shops, inventory menus and perks.</p>

            <div class="image-with-text">
              <img class="expandable-image" src="/images/portfolio_images/lumber_defense/menu.png">
              <p>Perks Shop Menu</p>
            </div>
            
            <h3>Packets</h3>
            <p>For the shopkeeper NPC, I had to spawn a fake player using packets, and display it to every player. When re-logging or restarting the game the packets had to be resent, so I created the <a href="https://github.com/Gameoholic/LumberGame/blob/main/src/main/java/xyz/gameoholic/lumbergame/game/player/npc/PlayerNPCManager.java" rel="noopener noreferrer" target="_blank">PlayerNPCManager</a> class that would handle all of that for me.<br>To indicate the tree's health, "block cracks" are displayed on the tree. This required sending block destruction packets to the player, as well as updating them whenever the tree's health changed, and handling edge cases.</p>
  
            <h3>Other</h3>
            <p>The plugin uses my <a href="/projects/partigon.html" rel="noopener noreferrer" target="_blank">Partigon</a> library to create the particle animations seen in this plugin.<br>I used the <a href="https://www.spigotmc.org/resources/fastasyncworldedit.13932/" rel="noopener noreferrer" target="_blank">FAWE API</a> to update the tree with a schematic upon levelling it up.</p>
          </div>

        </div>
      </div>

      <div class="github">
        <h2>Project's source:</h2>
        <a href="https://github.com/Gameoholic/LumberGame" rel="noopener noreferrer" target="_blank"><i class="fa-brands fa-github"></i></a>
      </div>

      <div class="go-back">
        <button onclick="location.href='/index.html#projects'" type="button">
          Go back
        </button>
      </div>
  </body>
</html>

<script src="/scripts/global.js"></script>
